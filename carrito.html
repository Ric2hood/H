<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Carrito â€“ HENRIS</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>

  <!-- HEADER -->
  <header>
    <div class="logo">HENRIS</div>
    <nav class="nav-right">
      <a href="index.html">Inicio</a>
      <a href="stock.html">Stock</a>
      <a href="pedidos.html">Pedidos</a>
      <a href="carrito.html" class="cart">ðŸ›’ <span id="cart-count">0</span></a>
    </nav>
  </header>

  <!-- SECCIÃ“N CARRITO -->
  <section class="carrito">
    <h1>Tu Carrito</h1>
    <div id="carrito-items"></div>
    <p class="carrito-total" id="carrito-total">Total: S/ 0</p>

    <h2>Datos para el envÃ­o</h2>
    <form id="form-pago">
      <input type="text" id="nombre" placeholder="Nombre completo" required>
      <input type="email" id="correo" placeholder="Correo electrÃ³nico" required>
      <input type="text" id="telefono" placeholder="TelÃ©fono" required>
      <textarea id="direccion" placeholder="DirecciÃ³n" required></textarea>
      <button type="submit">Pagar carrito (prueba)</button>
    </form>
  </section>

  <footer class="footer">
    <p>Â© 2025 HENRIS Â· Perfumes de Lujo</p>
  </footer>

  <script>
    const carritoItemsDiv = document.getElementById("carrito-items");
    const carritoTotal = document.getElementById("carrito-total");
    const formPago = document.getElementById("form-pago");

    let carrito = JSON.parse(localStorage.getItem("carrito")) || [];

    // Mostrar productos en el carrito
    function mostrarCarrito() {
      carritoItemsDiv.innerHTML = "";
      let total = 0;

      carrito.forEach((p, index) => {
        const item = document.createElement("div");
        item.className = "carrito-item";
        item.innerHTML = `
          <span>${index + 1}. ${p.nombre} - S/ ${p.precio}</span>
          <button onclick="eliminarDelCarrito(${index})">Eliminar</button>
        `;
        carritoItemsDiv.appendChild(item);
        total += Number(p.precio);
      });

      carritoTotal.textContent = `Total: S/ ${total}`;
      document.getElementById("cart-count").textContent = carrito.length;
    }

    mostrarCarrito();

    // Eliminar producto
    function eliminarDelCarrito(index) {
      carrito.splice(index, 1);
      localStorage.setItem("carrito", JSON.stringify(carrito));
      mostrarCarrito();
    }

    // Simular pago (guardar datos en localStorage)
    formPago.addEventListener("submit", (e) => {
      e.preventDefault();

      const datos = {
        nombre: document.getElementById("nombre").value,
        correo: document.getElementById("correo").value,
        telefono: document.getElementById("telefono").value,
        direccion: document.getElementById("direccion").value,
        productos: carrito
      };

      // Guardar pedido para admin
      let pedidos = JSON.parse(localStorage.getItem("pedidos")) || [];
      pedidos.push(datos);
      localStorage.setItem("pedidos", JSON.stringify(pedidos));

      // Limpiar carrito
      carrito = [];
      localStorage.setItem("carrito", JSON.stringify(carrito));
      mostrarCarrito();

      alert("âœ… Pedido enviado (prueba)");
      formPago.reset();
    });
  </script>

</body>
</html>